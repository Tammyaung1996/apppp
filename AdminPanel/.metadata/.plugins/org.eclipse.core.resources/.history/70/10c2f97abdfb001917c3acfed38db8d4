package com.nagarro.adminPanel.controller;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.nagarro.adminPanel.model.CustomerDetails;
import com.nagarro.adminPanel.services.UserRegistrationServices;

@Controller
public class UserRegistrationController {

	@Autowired
	UserRegistrationServices userRegistrationServices;

	@RequestMapping(value = "registerUser", method = RequestMethod.POST)
	public ModelAndView registerNewUser(HttpServletRequest request, HttpServletResponse response) throws Exception {

		CustomerDetails userInformation = new CustomerDetails();

		userInformation.setCustomerID(11);
		userInformation.setCustomerName(request.getParameter("customerName"));
		userInformation.setDateOfBirth(request.getParameter("dateOfBirth"));
		userInformation.setContactNumber(request.getParameter("contactNumber"));
		userInformation.setEmailID(request.getParameter("emailID"));

		System.out.println("1" + request.getParameter("customerName"));
		System.out.println("2" + request.getParameter("dateOfBirth"));
		System.out.println("3" + request.getParameter("contactNumber"));
		System.out.println("4" + request.getParameter("emailID"));

		ModelAndView modelAndView = null;

		userRegistrationServices.registerUser(userInformation);

		modelAndView = new ModelAndView("index");

		return modelAndView;

	}
}
